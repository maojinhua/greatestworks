# =============================================================================
# Greatest Works MMO 游戏服务器 - 环境变量配置模板
# =============================================================================
# 复制此文件为 .env 并根据实际环境修改配置值

# =============================================================================
# 应用基础配置
# =============================================================================
APP_ENV=development
APP_NAME=GreatestWorks
APP_VERSION=1.0.0
BUILD_VERSION=dev
BUILD_TARGET=development
IMAGE_TAG=latest

# =============================================================================
# 服务器配置
# =============================================================================
# HTTP服务端口
SERVER_HTTP_PORT=9080
# WebSocket服务端口
SERVER_WS_PORT=9081
# 监控指标端口
SERVER_METRICS_PORT=9090
# 服务器主机地址
SERVER_HOST=0.0.0.0

# Gin框架模式 (debug, release, test)
GIN_MODE=debug

# =============================================================================
# 日志配置
# =============================================================================
# 日志级别 (debug, info, warn, error, fatal, panic)
LOG_LEVEL=debug
# 日志格式 (json, text)
LOG_FORMAT=json
# 日志输出路径
LOG_OUTPUT=stdout,file
# 日志文件路径
LOG_FILE_PATH=./logs/app.log
# 日志文件最大大小 (MB)
LOG_MAX_SIZE=100
# 日志文件最大备份数
LOG_MAX_BACKUPS=3
# 日志文件最大保存天数
LOG_MAX_AGE=7

# =============================================================================
# 数据库配置
# =============================================================================
# MongoDB配置
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_USER=admin
MONGODB_PASSWORD=admin123
MONGODB_DATABASE=mmo_game
MONGODB_AUTH_SOURCE=admin
MONGODB_URI=mongodb://admin:admin123@localhost:27017/mmo_game?authSource=admin

# MongoDB连接池配置
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=5
MONGODB_MAX_IDLE_TIME=300s
MONGODB_CONNECT_TIMEOUT=10s
MONGODB_SERVER_SELECTION_TIMEOUT=5s

# =============================================================================
# Redis缓存配置
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis123
REDIS_DATABASE=0
REDIS_URL=redis://:redis123@localhost:6379/0

# Redis连接池配置
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=5
REDIS_POOL_TIMEOUT=4s
REDIS_IDLE_TIMEOUT=5m
REDIS_IDLE_CHECK_FREQUENCY=1m

# =============================================================================
# 消息队列配置 (NATS)
# =============================================================================
NATS_HOST=localhost
NATS_PORT=4222
NATS_URL=nats://localhost:4222
NATS_CLUSTER_ID=mmo-cluster
NATS_CLIENT_ID=mmo-server
NATS_MAX_RECONNECT=10
NATS_RECONNECT_WAIT=2s

# =============================================================================
# 安全配置
# =============================================================================
# JWT密钥 (生产环境请使用强密钥)
JWT_SECRET=your-super-secret-jwt-key-change-me-in-production
# JWT过期时间
JWT_EXPIRE_HOURS=24
# JWT刷新令牌过期时间
JWT_REFRESH_EXPIRE_HOURS=168

# 加密密钥 (32字符)
ENCRYPTION_KEY=32-char-encryption-key-change-me

# API限流配置
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=1h

# CORS配置
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:9080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Origin,Content-Type,Accept,Authorization,X-Requested-With

# =============================================================================
# 游戏配置
# =============================================================================
# 最大连接数
MAX_CONNECTIONS=10000
# 工作池大小
WORKER_POOL_SIZE=100
# 缓存TTL (秒)
CACHE_TTL=3600

# 游戏世界配置
MAX_PLAYERS_PER_ROOM=50
MAX_ROOMS_PER_SERVER=1000
GAME_TICK_RATE=60
GAME_WORLD_SIZE=10000

# 玩家配置
MAX_PLAYER_LEVEL=100
STARTING_GOLD=1000
STARTING_EXPERIENCE=0
MAX_INVENTORY_SIZE=100

# =============================================================================
# 性能配置
# =============================================================================
# 服务器资源限制
SERVER_CPU_LIMIT=2.0
SERVER_MEMORY_LIMIT=2G
SERVER_CPU_RESERVATION=0.5
SERVER_MEMORY_RESERVATION=512M

# Go运行时配置
GOMAXPROCS=0
GOGC=100
GOMEMLIMIT=1GiB

# =============================================================================
# 监控配置
# =============================================================================
# Prometheus配置
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# 健康检查配置
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30s

# 性能分析配置
PPROF_ENABLED=false
PPROF_PORT=6060

# =============================================================================
# 第三方服务配置
# =============================================================================
# 邮件服务配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@greatestworks.com

# 对象存储配置 (AWS S3 兼容)
S3_ENDPOINT=https://s3.amazonaws.com
S3_REGION=us-east-1
S3_BUCKET=greatestworks-assets
S3_ACCESS_KEY=your-access-key
S3_SECRET_KEY=your-secret-key

# CDN配置
CDN_BASE_URL=https://cdn.greatestworks.com
CDN_ENABLED=false

# =============================================================================
# 开发环境配置
# =============================================================================
# 开发模式开关
DEV_MODE=true
# 热重载开关
HOT_RELOAD=true
# 调试模式
DEBUG=true
# 详细日志
VERBOSE=true

# 测试数据库配置
TEST_MONGODB_URI=mongodb://admin:admin123@localhost:27017/mmo_game_test?authSource=admin
TEST_REDIS_URL=redis://:redis123@localhost:6379/1

# =============================================================================
# 生产环境配置
# =============================================================================
# 生产环境特定配置
# PROD_MONGODB_URI=mongodb://prod-user:prod-password@prod-mongodb:27017/mmo_game?authSource=admin
# PROD_REDIS_URL=redis://:prod-password@prod-redis:6379/0
# PROD_JWT_SECRET=super-secure-production-jwt-secret
# PROD_ENCRYPTION_KEY=super-secure-32-char-encryption-key

# SSL/TLS配置
# TLS_ENABLED=true
# TLS_CERT_FILE=/etc/ssl/certs/server.crt
# TLS_KEY_FILE=/etc/ssl/private/server.key

# =============================================================================
# Docker构建配置
# =============================================================================
BUILD_TIME=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
GIT_COMMIT=$(git rev-parse --short HEAD)
GIT_BRANCH=$(git rev-parse --abbrev-ref HEAD)

# =============================================================================
# 其他配置
# =============================================================================
# 时区配置
TZ=Asia/Shanghai

# 语言配置
LANG=zh_CN.UTF-8
LC_ALL=zh_CN.UTF-8

# 临时目录
TMP_DIR=/tmp

# 上传文件配置
UPLOAD_MAX_SIZE=10MB
UPLOAD_ALLOWED_TYPES=jpg,jpeg,png,gif,pdf,doc,docx
UPLOAD_PATH=./uploads

# 会话配置
SESSION_SECRET=your-session-secret-key
SESSION_MAX_AGE=86400
SESSION_SECURE=false
SESSION_HTTP_ONLY=true

# =============================================================================
# 注意事项
# =============================================================================
# 1. 生产环境请务必修改所有默认密码和密钥
# 2. 敏感信息不要提交到版本控制系统
# 3. 定期轮换密钥和密码
# 4. 使用强密码和复杂密钥
# 5. 根据实际部署环境调整资源限制
# =============================================================================